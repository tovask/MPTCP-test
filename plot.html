<html>
<head>
<!-- Plotly.js -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
html,body{
	width: 5500px;/* 12*400+4*100=4800+400=5200 */
}
div{
	float: left;
	width: 400px;
}
div:nth-of-type(3n){
	margin-right: 100px;
}
div:nth-of-type(3n){
	/*background-color: red;*/
}
div:nth-of-type(12n+1){
	clear: left;
}
body:after {
	content: "";
	display: table;
	clear: both;
}
</style>
</head>
<body>
<script>
<!-- JAVASCRIPT CODE GOES HERE -->
function log(msg){console.log(msg);}
function loadres(id,seq,title,bgcolor){
	var xmlhttp = new XMLHttpRequest();
	xmlhttp.onreadystatechange = function(){if(xmlhttp.readyState == XMLHttpRequest.DONE && xmlhttp.status == 200){
		var lines = xmlhttp.responseText.split("\n");
		var values, time, bandwidth;
		var res = [];
		for(i in lines){
			values = lines[i].split(" ");
			time = Number(values[0]);
			bandwidth = Number(values[1]);
			if(values.length!=2 || time==NaN || bandwidth==NaN )
				continue;
			//log( lines[i]+" : \t"+time + ", "+ bandwidth );
			res.push({"x":time,"y":bandwidth});
		}
		//log(res);
		
		
		
		// try to fix holes and missing end
		max_interval = 1.0;
		max_num = 24.9;
		missing = [];
		prev = 0;
		if( res[res.length-1].x < max_num ) // fix the end
			res.push( {"x":max_num,"y":0} );
		for( r in res){
			if(res[r].x-prev > max_interval)
				for(var i = prev+max_interval; i<res[r].x; i+=max_interval )
					missing.push( {"x":i,"y":0} );
			prev = res[r].x;
		}
		//log(missing);
		res = res.concat(missing);
		res.sort( function(a, b) {return a.x-b.x} );
		//log(res);
		
		
		var data = {
				x: [],
				y: [],
				error_y: {
					type: 'data',
					symmetric: false,
					array: [0.1, 0.2, 0.1, 0.1],
					arrayminus: [0.2, 0.4, 1, 0.2]
				},
				line: {color: 'rgb(0, 0, 0)'},
				type: 'line'
			};
		for(i in res){
			data.x.push(res[i].x);
			data.y.push(res[i].y);
		}
		//log(data);
		Plotly.newPlot(document.getElementById(id+"_"+seq), [data], {title:title,paper_bgcolor:bgcolor,plot_bgcolor:bgcolor/*'rgba(0,0,0,0)'*/});
	}};
	xmlhttp.open("GET", "results/"+id+"_"+seq+"_bandwith_server_log.csv", true);
	xmlhttp.send();
}
for( cc in {'cubic':0, 'lia':0, 'olia':0, 'wvegas':0, 'balia':0}){
	if(cc!='olia'){
	//	break;
	}
	for( pm in {'default':0, 'fullmesh':0, 'ndiffports':0, 'binder':0}){
		for( sc in {'default':0, 'roundrobin':0, 'redundant':0}){
			id = cc+"_"+pm+"_"+sc;
			title = cc+" "+pm+" "+sc;
			for(i in {1:0,2:0,3:0,4:0,5:0}){
				div = document.createElement("div");
				div.setAttribute('id',id+"_"+i);
				document.body.appendChild(div);
				loadres( id, i, title, {'default':'#FFFF00', 'roundrobin':'#1CE6FF', 'redundant':'#FF34FF'}[sc]);
				break;
			}
			//break;
		}
		//break;
	}
	//break;
}
/*
var data = {
		x: [1, 2, 3, 4],
		y: [2, 1, 3, 4],
		error_y: {
			type: 'data',
			symmetric: false,
			array: [0.1, 0.2, 0.1, 0.1],
			arrayminus: [0.2, 0.4, 1, 0.2]
		},
		type: 'scatter'
	};
Plotly.newPlot('myDiv', [data]);
*/
</script>
</body>
</html>